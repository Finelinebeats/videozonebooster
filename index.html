<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEO Traffic Simul√°tor - CSV Import</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #2ecc71;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            background: linear-gradient(90deg, #ff8a00, #e52e71);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        button {
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(90deg, var(--secondary), var(--accent));
            color: white;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(0, 0, 0, 0.2);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        .import-section {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .import-section h3 {
            margin-bottom: 15px;
            color: #fdbb2d;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
        }
        
        .file-upload {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .file-input {
            padding: 12px;
            background: rgba(255,255,255,0.1);
            border: 2px dashed rgba(255,255,255,0.3);
            border-radius: 8px;
            color: white;
            flex: 1;
            min-width: 300px;
        }
        
        .csv-preview {
            margin-top: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            padding: 15px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .csv-preview table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .csv-preview th, .csv-preview td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .csv-preview th {
            background: rgba(255,255,255,0.1);
            color: #fdbb2d;
        }
        
        .stats-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 25px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-card h3 {
            margin-bottom: 15px;
            color: #fdbb2d;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
            color: var(--success);
        }
        
        .progress-container {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            height: 12px;
            margin-top: 15px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--accent));
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        .website-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .website-card {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            height: 400px;
        }
        
        .website-card:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        .website-header {
            padding: 15px 20px;
            background: rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            gap: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .website-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .website-info {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .website-title {
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 5px;
        }
        
        .website-url {
            color: #fdbb2d;
            font-size: 0.9rem;
            opacity: 0.8;
            word-break: break-all;
        }
        
        .website-frame-container {
            flex: 1;
            position: relative;
            background: #000;
            overflow: hidden;
        }
        
        .website-frame {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
        }
        
        .website-frame-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 15px;
            transition: opacity 0.3s ease;
        }
        
        .website-frame-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .website-stats {
            padding: 15px 20px;
            background: rgba(0,0,0,0.3);
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .active {
            background-color: var(--success);
            animation: pulse 2s infinite;
        }
        
        .inactive {
            background-color: #e74c3c;
        }
        
        .loading {
            background-color: #f39c12;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .debug-panel {
            background: rgba(0, 0, 0, 0.6);
            border-radius: 12px;
            padding: 25px;
            margin-top: 20px;
            font-family: monospace;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .debug-panel h3 {
            margin-bottom: 15px;
            color: #fdbb2d;
            font-size: 1.4rem;
        }
        
        .debug-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .debug-item {
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 0.95rem;
        }
        
        .session-info {
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .traffic-animation {
            height: 4px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
            margin: 20px 0;
            animation: trafficFlow 2s infinite linear;
        }
        
        @keyframes trafficFlow {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .floating-notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(46, 204, 113, 0.9);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: none;
            z-index: 1000;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .play-button {
            padding: 12px 24px;
            background: linear-gradient(90deg, var(--secondary), var(--accent));
            border: none;
            border-radius: 6px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .play-button:hover {
            transform: scale(1.05);
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            border: 2px dashed rgba(255,255,255,0.2);
        }
        
        .empty-state h3 {
            color: #fdbb2d;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        @media (max-width: 768px) {
            .website-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-panel {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .website-card {
                height: 350px;
            }
            
            .file-upload {
                flex-direction: column;
            }
            
            .file-input {
                min-width: auto;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ SEO Traffic Simul√°tor</h1>
            <p class="subtitle">CSV Import - Weboldalak bet√∂lt√©se iframe-ekben YouTube Link Editor kompatibilis form√°tumban</p>
        </header>
        
        <div class="session-info">
            <h2>üìÅ CSV F√°jl Import</h2>
            <p>T√∂lts fel CSV f√°jlt webc√≠mekkel - ugyanaz a form√°tum, mint a YouTube Link Editorban</p>
            <div class="traffic-animation"></div>
        </div>
        
        <div class="import-section">
            <h3>üì§ CSV F√°jl Felt√∂lt√©s</h3>
            <div class="file-upload">
                <input type="file" id="csvFile" accept=".csv" class="file-input" 
                       placeholder="V√°lassz CSV f√°jlt...">
                <button onclick="importCSV()">
                    <span>üìÅ</span> CSV Import
                </button>
                <button onclick="downloadTemplate()">
                    <span>üì•</span> CSV Sablon
                </button>
            </div>
            
            <div class="csv-preview" id="csvPreview" style="display: none;">
                <h4>üîç CSV El≈ën√©zet (els≈ë 5 sor):</h4>
                <table id="previewTable">
                    <thead>
                        <tr>
                            <th>URL</th>
                            <th>N√©v</th>
                            <th>Kateg√≥ria</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
        
        <div class="controls">
            <button onclick="startTrafficGeneration()">
                <span>üöÄ</span> Forgalom Gener√°l√°s
            </button>
            <button onclick="loadAllWebsites()">
                <span>üåê</span> √ñsszes Bet√∂lt√©se
            </button>
            <button onclick="stopTrafficGeneration()">
                <span>‚èπÔ∏è</span> Gener√°l√°s Le√°ll√≠t√°sa
            </button>
            <button onclick="resetStats()">
                <span>üîÑ</span> Statisztik√°k Reset
            </button>
        </div>
        
        <div class="stats-panel">
            <div class="stat-card">
                <h3>üìà Bet√∂lt√∂tt Oldalak</h3>
                <div class="stat-value" id="loadedCount">0</div>
                <p>Eddig bet√∂lt√∂tt weboldalak sz√°ma</p>
                <div class="progress-container">
                    <div class="progress-bar" id="loadedProgress" style="width: 0%"></div>
                </div>
            </div>
            
            <div class="stat-card">
                <h3>‚è±Ô∏è √Åtlagos Id≈ë</h3>
                <div class="stat-value" id="avgTime">0s</div>
                <p>√Åtlagos id≈ë egy oldalon</p>
                <div class="progress-container">
                    <div class="progress-bar" style="width: 45%"></div>
                </div>
            </div>
            
            <div class="stat-card">
                <h3>üåê Akt√≠v L√°togat√≥k</h3>
                <div class="stat-value" id="activeVisitors">1</div>
                <p>Jelenleg akt√≠v felhaszn√°l√≥k</p>
                <div class="progress-container">
                    <div class="progress-bar" style="width: 100%"></div>
                </div>
            </div>
            
            <div class="stat-card">
                <h3>üìä SEO Hat√©konys√°g</h3>
                <div class="stat-value" id="seoScore">0%</div>
                <p>Becs√ºlt rangn√∂veked√©s</p>
                <div class="progress-container">
                    <div class="progress-bar" style="width: 0%"></div>
                </div>
            </div>
        </div>
        
        <div class="website-grid" id="websiteGrid">
            <div class="empty-state" id="emptyState">
                <h3>üìÅ Nincsenek weboldalak</h3>
                <p>El≈ësz√∂r t√∂lts fel egy CSV f√°jlt webc√≠mekkel</p>
                <p style="opacity: 0.7; margin-top: 10px;">T√°mogatott form√°tum: URL, N√©v, Kateg√≥ria</p>
            </div>
        </div>
        
        <div class="debug-panel">
            <h3>üîç SEO R√©szletek & Diagnosztika</h3>
            <div class="debug-info">
                <div class="debug-item" id="debugUserAgent">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:120.0) Gecko/20100101 Firefox/120.0</div>
                <div class="debug-item" id="debugIP">IP C√≠m: 104.28.235.68 (Ashburn, Virginia)</div>
                <div class="debug-item" id="debugSession">Munkamenet: 00:00:00 | Oldalak: 0/0</div>
                <div class="debug-item" id="debugStatus">√Ållapot: Inakt√≠v - V√°rakoz√°s CSV importra</div>
            </div>
        </div>
    </div>
    
    <div class="floating-notification" id="notification">
        CSV f√°jl sikeresen import√°lva!
    </div>

    <script>
        // Weboldal adatb√°zis - kezdetben √ºres
        let WEBSITES = [];
        let currentWebsites = [];

        // √Ållapotv√°ltoz√≥k
        let loadedCount = 0;
        let isRunning = false;
        let intervalId = null;
        let startTime = null;
        let sessionTimer = null;
        let currentIndex = 0;
        
        // DOM elemek
        const websiteGrid = document.getElementById('websiteGrid');
        const emptyState = document.getElementById('emptyState');
        const loadedCountElement = document.getElementById('loadedCount');
        const loadedProgressElement = document.getElementById('loadedProgress');
        const avgTimeElement = document.getElementById('avgTime');
        const activeVisitorsElement = document.getElementById('activeVisitors');
        const seoScoreElement = document.getElementById('seoScore');
        const notification = document.getElementById('notification');
        const csvPreview = document.getElementById('csvPreview');
        const previewTable = document.getElementById('previewTable').querySelector('tbody');
        
        // CSV Import funkci√≥
        function importCSV() {
            const fileInput = document.getElementById('csvFile');
            const file = fileInput.files[0];
            
            if (!file) {
                showNotification('‚ùå V√°lassz ki egy CSV f√°jlt!');
                return;
            }
            
            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    const csvData = e.target.result;
                    const websites = parseCSV(csvData);
                    
                    if (websites.length === 0) {
                        showNotification('‚ùå A CSV f√°jl √ºres vagy hib√°s form√°tum√∫!');
                        return;
                    }
                    
                    WEBSITES = websites;
                    currentWebsites = [...WEBSITES];
                    renderWebsites();
                    showPreview(websites);
                    showNotification(`‚úÖ CSV import√°lva: ${websites.length} weboldal`);
                    
                    document.getElementById('debugStatus').textContent = 
                        `√Ållapot: CSV import√°lva - ${websites.length} weboldal`;
                        
                } catch (error) {
                    showNotification('‚ùå Hiba a CSV f√°jl feldolgoz√°s√°ban: ' + error.message);
                }
            };
            
            reader.onerror = function() {
                showNotification('‚ùå Hiba a f√°jl olvas√°s√°ban');
            };
            
            reader.readAsText(file);
        }
        
        // CSV f√°jl feldolgoz√°sa
        function parseCSV(csvData) {
            const lines = csvData.split('\n').filter(line => line.trim() !== '');
            const websites = [];
            
            // Fejl√©c ellen≈ërz√©se (opcion√°lis)
            const headers = lines[0].split(',').map(h => h.trim().toLowerCase());
            const hasHeader = headers.some(h => h.includes('url') || h.includes('n√©v') || h.includes('name'));
            
            const startLine = hasHeader ? 1 : 0;
            
            for (let i = startLine; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;
                
                // Egyszer≈± CSV feldolgoz√°s - vessz≈ëvel elv√°lasztott
                const columns = parseCSVLine(line);
                
                if (columns.length >= 1) {
                    const url = columns[0].trim();
                    const name = columns[1] ? columns[1].trim() : `Weboldal ${i + 1}`;
                    const category = columns[2] ? columns[2].trim() : '√Åltal√°nos';
                    const description = columns[3] ? columns[3].trim() : `${name} - SEO k√≠s√©rlet`;
                    
                    // URL valid√°l√°s
                    if (isValidUrl(url)) {
                        websites.push({
                            name: name,
                            url: url,
                            category: category,
                            description: description,
                            demoUrl: url // Val√≥di URL-t haszn√°lunk
                        });
                    }
                }
            }
            
            return websites;
        }
        
        // CSV sor feldolgoz√°sa - kezeli a vessz≈ëket id√©z≈ëjelek k√∂z√∂tt
        function parseCSVLine(line) {
            const result = [];
            let current = '';
            let inQuotes = false;
            
            for (let i = 0; i < line.length; i++) {
                const char = line[i];
                
                if (char === '"') {
                    inQuotes = !inQuotes;
                } else if (char === ',' && !inQuotes) {
                    result.push(current);
                    current = '';
                } else {
                    current += char;
                }
            }
            
            result.push(current);
            return result;
        }
        
        // URL valid√°l√°s
        function isValidUrl(string) {
            try {
                new URL(string);
                return true;
            } catch (_) {
                return false;
            }
        }
        
        // CSV el≈ën√©zet megjelen√≠t√©se
        function showPreview(websites) {
            const previewCount = Math.min(5, websites.length);
            previewTable.innerHTML = '';
            
            for (let i = 0; i < previewCount; i++) {
                const website = websites[i];
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${website.url}</td>
                    <td>${website.name}</td>
                    <td>${website.category}</td>
                `;
                
                previewTable.appendChild(row);
            }
            
            csvPreview.style.display = 'block';
        }
        
        // CSV sablon let√∂lt√©se
        function downloadTemplate() {
            const template = `URL,N√©v,Kateg√≥ria,Le√≠r√°s
https://example.com,Example F≈ëoldal,√Åltal√°nos,P√©lda weboldal f≈ëoldala
https://example.com/blog,Blog Oldal,Blog,Cikkek √©s bejegyz√©sek
https://example.com/contact,Kapcsolat,Inform√°ci√≥,Kapcsolatfelv√©teli ≈±rlap
https://example.com/products,Term√©kek,E-kereskedelm,Term√©k katal√≥gus
https://example.com/about,R√≥lunk,Inform√°ci√≥,C√©ginform√°ci√≥k`;
            
            const blob = new Blob([template], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            
            a.href = url;
            a.download = 'seo_traffic_template.csv';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            showNotification('üì• CSV sablon let√∂ltve!');
        }
        
        // Weboldalak renderel√©se iframe-ekkel
        function renderWebsites() {
            if (WEBSITES.length === 0) {
                emptyState.style.display = 'block';
                websiteGrid.innerHTML = '';
                websiteGrid.appendChild(emptyState);
                return;
            }
            
            emptyState.style.display = 'none';
            websiteGrid.innerHTML = '';
            
            WEBSITES.forEach((website, index) => {
                const websiteCard = document.createElement('div');
                websiteCard.className = 'website-card';
                websiteCard.innerHTML = `
                    <div class="website-header">
                        <div class="website-icon">${website.name.charAt(0)}</div>
                        <div class="website-info">
                            <div class="website-title">${website.name}</div>
                            <div class="website-url">${website.url}</div>
                        </div>
                    </div>
                    <div class="website-frame-container">
                        <iframe class="website-frame" 
                                data-website-id="${index}"
                                sandbox="allow-scripts allow-same-origin allow-forms allow-popups"
                                loading="lazy">
                        </iframe>
                        <div class="website-frame-overlay" id="overlay-${index}">
                            <div style="text-align: center;">
                                <div style="font-size: 3rem; margin-bottom: 10px;">üåê</div>
                                <div style="font-weight: bold; margin-bottom: 10px;">${website.name}</div>
                                <div style="opacity: 0.8; margin-bottom: 20px;">${website.description}</div>
                                <button class="play-button" onclick="loadWebsite(${index})">
                                    ‚ñ∂Ô∏è Oldal Bet√∂lt√©se
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="website-stats">
                        <span><span class="status-indicator inactive" id="status-${index}"></span> Inakt√≠v</span>
                        <span>Megtekintve: <span id="visitCount-${index}">0</span>x</span>
                        <span>√Åtlag id≈ë: <span id="timeCount-${index}">0</span>s</span>
                    </div>
                `;
                
                websiteGrid.appendChild(websiteCard);
            });
        }
        
        // Egy weboldal bet√∂lt√©se
        function loadWebsite(index) {
            if (index >= WEBSITES.length) return;
            
            const website = WEBSITES[index];
            const iframe = document.querySelector(`iframe[data-website-id="${index}"]`);
            const overlay = document.getElementById(`overlay-${index}`);
            const statusIndicator = document.getElementById(`status-${index}`);
            
            // St√°tusz friss√≠t√©se
            statusIndicator.className = 'status-indicator loading';
            statusIndicator.parentElement.innerHTML = `<span class="status-indicator loading"></span> Bet√∂lt√©s...`;
            
            // Iframe forr√°s be√°ll√≠t√°sa
            iframe.src = website.url;
            
            // Overlay elrejt√©se k√©sleltet√©ssel
            setTimeout(() => {
                overlay.classList.add('hidden');
                statusIndicator.className = 'status-indicator active';
                statusIndicator.parentElement.innerHTML = `<span class="status-indicator active"></span> Akt√≠v`;
                
                // Statisztika friss√≠t√©se
                loadedCount++;
                loadedCountElement.textContent = loadedCount;
                const progress = WEBSITES.length > 0 ? (loadedCount / WEBSITES.length) * 100 : 0;
                loadedProgressElement.style.width = `${Math.min(100, progress)}%`;
                
                // L√°togat√°s sz√°ml√°l√≥ friss√≠t√©se
                const visitCountElement = document.getElementById(`visitCount-${index}`);
                const currentVisits = parseInt(visitCountElement.textContent) + 1;
                visitCountElement.textContent = currentVisits;
                
                // Id≈ëz√≠t≈ë ind√≠t√°sa az √°tlagos id≈ëh√∂z
                startTimeTracking(index);
                
                // SEO pontsz√°m friss√≠t√©se
                updateSeoScore();
                
                // √ârtes√≠t√©s megjelen√≠t√©se
                showNotification(`üåê ${website.name} bet√∂ltve`);
                
                // Debug inform√°ci√≥k friss√≠t√©se
                updateDebugInfo();
            }, 1500);
        }
        
        // Id≈ë k√∂vet√©s ind√≠t√°sa egy weboldalhoz
        function startTimeTracking(index) {
            const startTime = new Date();
            const timeCountElement = document.getElementById(`timeCount-${index}`);
            
            const timeInterval = setInterval(() => {
                const currentTime = new Date();
                const seconds = Math.floor((currentTime - startTime) / 1000);
                timeCountElement.textContent = seconds;
            }, 1000);
            
            // 30 m√°sodperc ut√°n automatikus le√°ll√≠t√°s
            setTimeout(() => {
                clearInterval(timeInterval);
                const statusIndicator = document.getElementById(`status-${index}`);
                statusIndicator.className = 'status-indicator inactive';
                statusIndicator.parentElement.innerHTML = `<span class="status-indicator inactive"></span> Inakt√≠v`;
            }, 30000);
        }
        
        // Forgalom gener√°l√°s ind√≠t√°sa
        function startTrafficGeneration() {
            if (WEBSITES.length === 0) {
                showNotification('‚ùå El≈ësz√∂r import√°lj CSV f√°jlt!');
                return;
            }
            
            if (isRunning) return;
            
            isRunning = true;
            startTime = new Date();
            document.getElementById('debugStatus').textContent = 
                `√Ållapot: Akt√≠v - ${WEBSITES.length} weboldal automatikus bet√∂lt√©se`;
            
            // Automatikus bet√∂lt√©s ind√≠t√°sa
            intervalId = setInterval(loadNextWebsite, 8000);
            
            // Els≈ë weboldal azonnali bet√∂lt√©se
            loadNextWebsite();
            
            showNotification('üöÄ Automatikus bet√∂lt√©s elind√≠tva!');
        }
        
        // K√∂vetkez≈ë weboldal bet√∂lt√©se
        function loadNextWebsite() {
            if (currentIndex >= WEBSITES.length) {
                currentIndex = 0;
            }
            
            loadWebsite(currentIndex);
            currentIndex++;
        }
        
        // √ñsszes weboldal bet√∂lt√©se
        function loadAllWebsites() {
            if (WEBSITES.length === 0) {
                showNotification('‚ùå El≈ësz√∂r import√°lj CSV f√°jlt!');
                return;
            }
            
            WEBSITES.forEach((website, index) => {
                setTimeout(() => {
                    loadWebsite(index);
                }, index * 2000);
            });
            
            showNotification('üåê √ñsszes weboldal bet√∂lt√©se folyamatban...');
        }
        
        // Forgalom gener√°l√°s le√°ll√≠t√°sa
        function stopTrafficGeneration() {
            if (!isRunning) return;
            
            isRunning = false;
            clearInterval(intervalId);
            document.getElementById('debugStatus').textContent = '√Ållapot: Inakt√≠v - Gener√°l√°s le√°ll√≠tva';
            
            showNotification('‚èπÔ∏è Automatikus bet√∂lt√©s le√°ll√≠tva');
        }
        
        // Statisztik√°k vissza√°ll√≠t√°sa
        function resetStats() {
            loadedCount = 0;
            currentIndex = 0;
            loadedCountElement.textContent = '0';
            loadedProgressElement.style.width = '0%';
            seoScoreElement.textContent = '0%';
            
            // L√°togat√°s sz√°ml√°l√≥k vissza√°ll√≠t√°sa
            WEBSITES.forEach((_, index) => {
                const visitCountElement = document.getElementById(`visitCount-${index}`);
                const timeCountElement = document.getElementById(`timeCount-${index}`);
                if (visitCountElement) visitCountElement.textContent = '0';
                if (timeCountElement) timeCountElement.textContent = '0';
                
                // Iframe-ek vissza√°ll√≠t√°sa
                const iframe = document.querySelector(`iframe[data-website-id="${index}"]`);
                const overlay = document.getElementById(`overlay-${index}`);
                const statusIndicator = document.getElementById(`status-${index}`);
                
                if (iframe) iframe.src = '';
                if (overlay) overlay.classList.remove('hidden');
                if (statusIndicator) {
                    statusIndicator.className = 'status-indicator inactive';
                    statusIndicator.parentElement.innerHTML = `<span class="status-indicator inactive"></span> Inakt√≠v`;
                }
            });
            
            showNotification('üîÑ Statisztik√°k vissza√°ll√≠tva');
        }
        
        // SEO pontsz√°m friss√≠t√©se
        function updateSeoScore() {
            const score = WEBSITES.length > 0 ? 
                Math.min(100, Math.floor((loadedCount / WEBSITES.length) * 100)) : 0;
            seoScoreElement.textContent = `${score}%`;
            
            // Progress bar friss√≠t√©se
            document.querySelectorAll('.progress-bar')[3].style.width = `${score}%`;
        }
        
        // Munkamenet id≈ëz√≠t≈ë
        function startSessionTimer() {
            sessionTimer = setInterval(() => {
                if (startTime) {
                    const now = new Date();
                    const diff = now - startTime;
                    const hours = Math.floor(diff / 3600000);
                    const minutes = Math.floor((diff % 3600000) / 60000);
                    const seconds = Math.floor((diff % 60000) / 1000);
                    
                    document.getElementById('debugSession').textContent = 
                        `Munkamenet: ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')} | Oldalak: ${loadedCount}/${WEBSITES.length}`;
                    
                    // √Åtlagos id≈ë friss√≠t√©se
                    if (loadedCount > 0) {
                        const avgTime = Math.floor(diff / loadedCount / 1000);
                        avgTimeElement.textContent = `${avgTime}s`;
                    }
                }
            }, 1000);
        }
        
        // Debug inform√°ci√≥k friss√≠t√©se
        function updateDebugInfo() {
            document.getElementById('debugUserAgent').textContent = 
                `User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:120.0) Gecko/20100101 Firefox/120.0`;
            
            document.getElementById('debugIP').textContent = 
                `IP C√≠m: 104.28.235.${Math.floor(Math.random() * 100)} (Ashburn, Virginia)`;
            
            document.getElementById('debugSession').textContent = 
                `Munkamenet: 00:00:00 | Oldalak: ${loadedCount}/${WEBSITES.length}`;
            
            document.getElementById('debugStatus').textContent = 
                WEBSITES.length === 0 ? 
                '√Ållapot: Inakt√≠v - V√°rakoz√°s CSV importra' :
                `√Ållapot: ${isRunning ? 'Akt√≠v' : 'Inakt√≠v'} - ${WEBSITES.length} weboldal`;
        }
        
        // √ârtes√≠t√©s megjelen√≠t√©se
        function showNotification(message) {
            notification.textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
        
        // Oldal bet√∂lt√©sekor inicializ√°l√°s
        window.addEventListener('load', function() {
            updateDebugInfo();
            startSessionTimer();
        });
    </script>
</body>
</html>
